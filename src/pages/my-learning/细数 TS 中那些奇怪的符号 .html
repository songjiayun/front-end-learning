<html>

<head>
	<title>Evernote Export</title>
	<basefont face="微软雅黑" size="2" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta name="exporter-version" content="YXBJ Windows/604762 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;" />
	<style>
		body,
		td {
			font-family: 微软雅黑;
			font-size: 10pt;
		}
	</style>
</head>

<body>
	<a name="540" />

	<div>
		<span>
			<div style="--en-clipped-content: article;">
				<div><br clear="none" /></div>
				<div style="font-size: 16px; display: block; min-width: 100%; position: relative;">
					<div
						style="text-size-adjust: 100%; font-size: 12px; word-break: break-word; text-rendering: optimizelegibility; color: #333333; background-color: #f4f5f5; font-family: -apple-system, system-ui, 'Segoe UI', Roboto, Ubuntu, Cantarell, 'Noto Sans', sans-serif, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', Arial;">
						<div style="font-size: 12px; line-height: normal; word-break: break-word;">
							<div style="overflow-x: initial;">
								<div style="box-sizing: border-box;">
									<div style="border-radius: 4px; background-color: #ffffff; box-sizing: border-box;">
										<div><br clear="none" /></div>
										<div>
											<div><br clear="none" /></div>
										</div>
										<h1
											style="font-weight: 600; line-height: 1.31; color: #252933; font-size: 32.004px; margin: 0px 0px 1.667rem;">
											细数 TS 中那些奇怪的符号</h1>
										<div style="margin-bottom: 20.004px; display: flex; align-items: center;"><br clear="none" /></div>
										<div>
											<div
												style="word-break: break-word; line-height: 1.75; font-weight: 400; font-size: 16px; overflow-x: hidden; color: #333333;">
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													一、! 非空断言操作符</h3>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													在上下文中当类型检查器无法断定类型时，一个新的后缀表达式操作符 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">!</code>
													可以用于断言操作对象是非 null 和非 undefined 类型。<strong style="font-weight: bold;">具体而言，<span
															style="color: rgb(255, 156, 0);">x! 将从 x 值域中排除 null 和 undefined 。</span></strong></p>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													那么非空断言操作符到底有什么用呢？下面我们先来看一下非空断言操作符的一些使用场景。</p>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													1.1 忽略 undefined 和 null 类型</h4>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">myFunc</span>(<span>maybeString: <span style="color: #0086b3;">string</span> | <span style="color: teal;">undefined</span> | <span style="color: teal;">null</span></span>) </span>{
  <span style="color: #999988; font-style: italic;">// Type 'string | null | undefined' is not assignable to type 'string'.</span>
  <span style="color: #999988; font-style: italic;">// Type 'undefined' is not assignable to type 'string'. </span>
  <span style="color: #333333; font-weight: bold;">const</span> onlyString: <span style="color: #0086b3;">string</span> = maybeString; <span style="color: #999988; font-style: italic;">// Error</span>
  <span style="color: #333333; font-weight: bold;">const</span> ignoreUndefinedAndNull: <span style="color: #0086b3;">string</span> = maybeString!; <span style="color: #999988; font-style: italic;">// Ok</span>
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													1.2 调用函数时忽略 undefined 类型</h4>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">type</span> NumGenerator = <span>() =&gt;</span> <span style="color: #0086b3;">number</span>;

<span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">myFunc</span>(<span>numGenerator: NumGenerator | <span style="color: teal;">undefined</span></span>) </span>{
  <span style="color: #999988; font-style: italic;">// Object is possibly 'undefined'.(2532)</span>
  <span style="color: #999988; font-style: italic;">// Cannot invoke an object which is possibly 'undefined'.(2722)</span>
  <span style="color: #333333; font-weight: bold;">const</span> num1 = numGenerator(); <span style="color: #999988; font-style: italic;">// Error</span>
  <span style="color: #333333; font-weight: bold;">const</span> num2 = numGenerator!(); <span style="color: #999988; font-style: italic;">//OK</span>
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">因为 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">!</code>
													非空断言操作符会从编译生成的 JavaScript 代码中移除，所以在实际使用的过程中，要特别注意。比如下面这个例子：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">const</span> a: <span style="color: #0086b3;">number</span> | <span style="color: teal;">undefined</span> = <span style="color: teal;">undefined</span>;
<span style="color: #333333; font-weight: bold;">const</span> b: <span style="color: #0086b3;">number</span> = a!;
<span style="color: #0086b3;">console</span>.log(b); 
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">以上 TS 代码会编译生成以下 ES5 代码：
												</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span style="color: #999999; font-weight: bold;">&quot;use strict&quot;</span>;
<span style="color: #333333; font-weight: bold;">const</span> a = <span style="color: teal;">undefined</span>;
<span style="color: #333333; font-weight: bold;">const</span> b = a;
<span style="color: #0086b3;">console</span>.log(b);
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">虽然在 TS 代码中，我们使用了非空断言，使得
													<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">const b: number = a!;</code>
													语句可以通过 TypeScript 类型检查器的检查。但在生成的 ES5 代码中，<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">!</code>
													非空断言操作符被移除了，所以在浏览器中执行以上代码，在控制台会输出 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">undefined</code>。
												</p>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													1.3 确定赋值断言</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在 TypeScript 2.7
													版本中引入了确定赋值断言，即允许在实例属性和变量声明后面放置一个 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">!</code>
													号，从而告诉 TypeScript 该属性会被明确地赋值。为了更好地理解它的作用，我们来看个具体的例子：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">let</span> x: <span style="color: #0086b3;">number</span>;
initialize();
<span style="color: #999988; font-style: italic;">// Variable 'x' is used before being assigned.(2454)</span>
<span style="color: #0086b3;">console</span>.log(<span style="color: teal;">2</span> * x); <span style="color: #999988; font-style: italic;">// Error</span>

<span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">initialize</span>() </span>{
  x = <span style="color: teal;">10</span>;
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">很明显该异常信息是说变量 x
													在赋值前被使用了，要解决该问题，我们可以使用确定赋值断言：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">let</span> x!: <span style="color: #0086b3;">number</span>;
initialize();
<span style="color: #0086b3;">console</span>.log(<span style="color: teal;">2</span> * x); <span style="color: #999988; font-style: italic;">// Ok</span>

<span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">initialize</span>() </span>{
  x = <span style="color: teal;">10</span>;
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">通过 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">let x!: number;</code>
													确定赋值断言，TypeScript 编译器就会知道该属性会被明确地赋值。</p>
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													二、?. 运算符</h3>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">TypeScript 3.7 实现了呼声最高的
													ECMAScript 功能之一：可选链（Optional Chaining）。有了可选链后，我们编写代码时如果遇到 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">null</code>
													或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">undefined</code>
													就可以立即停止某些表达式的运行。可选链的核心是新的 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">?.</code>
													运算符，它支持以下语法：</p>
												<blockquote
													style="color: #666666; padding: 1px 23px; margin: 22px 0px; border-left: 4px solid #cbcbcb; background-color: #f8f8f8;">
													<pre
														style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
														xml:space="preserve"><code style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; background: #f8f8f8; font-size: 12px; word-break: normal; overflow-x: auto; color: #333333; padding: 15px 12px;">obj?.prop
obj?.[expr]
arr?.[index]
func?.(args)
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
													<span style="color: #666666; display: block;"></span>
												</blockquote>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">这里我们来举一个<span
														style="color: rgb(255, 156, 0);">可选的属性访问</span>的例子：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">const</span> val = a?.b;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">为了更好的理解可选链，我们来看一下该 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">const val = a?.b</code>
													语句编译生成的 ES5 代码：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span style="color: #333333; font-weight: bold;">var</span> val = a === <span style="color: teal;">null</span> || a === <span style="color: #333333; font-weight: bold;">void</span> <span style="color: teal;">0</span> ? <span style="color: #333333; font-weight: bold;">void</span> <span style="color: teal;">0</span> : a.b;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">上述的代码会自动检查对象 a 是否为 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">null</code>
													或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">undefined</code>，如果是的话就立即返回
													<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">undefined</code>，这样就可以立即停止某些表达式的运行。你可能已经想到可以使用
													<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">?.</code>
													来替代很多使用 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&amp;&amp;</code>
													执行空检查的代码：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">if</span>(a &amp;&amp; a.b) { } 

<span style="color: #333333; font-weight: bold;">if</span>(a?.b){ }
<span style="color: #999988; font-style: italic;">/**
* if(a?.b){ } 编译后的ES5代码
* 
* if(
*  a === null || a === void 0 
*  ? void 0 : a.b) {
* }
*/</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">但需要注意的是，<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">?.</code>
													与 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&amp;&amp;</code>
													运算符行为略有不同，<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&amp;&amp;</code>
													专门用于检测 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">falsy</code>
													值，比如空字符串、0、NaN、null 和 false 等。而 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">?.</code>
													只会验证对象是否为 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">null</code>
													或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">undefined</code>，对于
													0 或空字符串来说，并不会出现 “短路”。</p>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													2.1 可选元素访问</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													可选链除了支持可选属性的访问之外，它还支持可选元素的访问，它的行为类似于可选属性的访问，只是可选元素的访问允许我们访问非标识符的属性，比如任意字符串、数字索引和 Symbol：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">tryGetArrayElement</span>&lt;<span style="color: #990000; font-weight: bold;">T</span>&gt;(<span>arr?: T[], index: <span style="color: #0086b3;">number</span> = <span style="color: teal;">0</span></span>) </span>{
  <span style="color: #333333; font-weight: bold;">return</span> arr?.[index];
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">以上代码经过编译后会生成以下 ES5 代码：
												</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span style="color: #999999; font-weight: bold;">&quot;use strict&quot;</span>;
<span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">tryGetArrayElement</span>(<span>arr, index</span>) </span>{
    <span style="color: #333333; font-weight: bold;">if</span> (index === <span style="color: #333333; font-weight: bold;">void</span> <span style="color: teal;">0</span>) { index = <span style="color: teal;">0</span>; }
    <span style="color: #333333; font-weight: bold;">return</span> arr === <span style="color: teal;">null</span> || arr === <span style="color: #333333; font-weight: bold;">void</span> <span style="color: teal;">0</span> ? <span style="color: #333333; font-weight: bold;">void</span> <span style="color: teal;">0</span> : arr[index];
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">通过观察生成的 ES5 代码，很明显在
													<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">tryGetArrayElement</code>
													方法中会自动检测输入参数 arr 的值是否为 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">null</code>
													或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">undefined</code>，从而保证了我们代码的健壮性。
												</p>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													2.2 可选链与函数调用</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													当尝试调用一个可能不存在的方法时也可以使用可选链。在实际开发过程中，这是很有用的。系统中某个方法不可用，有可能是由于版本不一致或者用户设备兼容性问题导致的。函数调用时如果被调用的方法不存在，使用可选链可以使表达式自动返回
													<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">undefined</code>
													而不是抛出一个异常。</p>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">可选调用使用起来也很简单，比如：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">let</span> result = obj.customMethod?.();
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">该 TypeScript 代码编译生成的 ES5
													代码如下：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span style="color: #333333; font-weight: bold;">var</span> result = (_a = obj.customMethod) === <span style="color: teal;">null</span>
  || _a === <span style="color: #333333; font-weight: bold;">void</span> <span style="color: teal;">0</span> ? <span style="color: #333333; font-weight: bold;">void</span> <span style="color: teal;">0</span> : _a.call(obj);
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													另外在使用可选调用的时候，我们要注意以下两个注意事项：</p>
												<ul style="padding: 0px; margin: 0px; padding-left: 28px;">
													<li style="margin-bottom: 0px; list-style: inherit;">如果存在一个属性名且该属性名对应的值不是函数类型，使用 <code
															style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">?.</code>
														仍然会产生一个 <a
															href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FTypeError"
															rel="nofollow noopener noreferrer" shape="rect"
															style="background-color: transparent; margin: initial; cursor: pointer; border-bottom: 1px solid #d1e9ff; text-decoration: none; color: #0269c8;"
															target="_blank"
															title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code
																style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">TypeError</code></a>
														异常。</li>
													<li style="margin-bottom: 0px; list-style: inherit;">可选链的运算行为被局限在属性的访问、调用以及元素的访问 ——
														它不会沿伸到后续的表达式中，也就是说可选调用不会阻止 <code
															style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">a?.b / someMethod()</code>
														表达式中的除法运算或 <code
															style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">someMethod</code>
														的方法调用。</li>
												</ul>
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													三、?? 空值合并运算符</h3>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在 TypeScript 3.7
													版本中除了引入了前面介绍的可选链 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">?.</code>
													之外，也引入了一个新的逻辑运算符 —— 空值合并运算符 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">??</code>。<strong
														style="font-weight: bold;">当左侧操作数为 null 或 undefined 时，其返回右侧的操作数，否则返回左侧的操作数</strong>。</p>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">与逻辑或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">||</code>
													运算符不同，逻辑或会在左操作数为 false 值时返回右侧操作数。也就是说，如果你使用 || 来为某些变量设置默认的值时，你可能会遇到意料之外的行为。比如为 false 值（''、NaN
													或 0）时。</p>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">这里来看一个具体的例子：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">const</span> foo = <span style="color: teal;">null</span> ?? <span style="color: #dd1144;">'default string'</span>;
<span style="color: #0086b3;">console</span>.log(foo); <span style="color: #999988; font-style: italic;">// 输出：&quot;default string&quot;</span>

<span style="color: #333333; font-weight: bold;">const</span> baz = <span style="color: teal;">0</span> ?? <span style="color: teal;">42</span>;
<span style="color: #0086b3;">console</span>.log(baz); <span style="color: #999988; font-style: italic;">// 输出：0</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">以上 TS 代码经过编译后，会生成以下 ES5
													代码：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="java" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">java</span><span style="color: #dd1144;">&quot;use strict&quot;</span>;
<span style="color: #333333; font-weight: bold;">var</span> _a, _b;
<span style="color: #333333; font-weight: bold;">var</span> foo = (_a = <span style="color: #333333; font-weight: bold;">null</span>) !== <span style="color: #333333; font-weight: bold;">null</span> &amp;&amp; _a !== <span style="color: #333333; font-weight: bold;">void</span> <span style="color: teal;">0</span> ? _a : <span style="color: #dd1144;">'default string'</span>;
console.log(foo); <span style="color: #999988; font-style: italic;">// 输出：&quot;default string&quot;</span>

<span style="color: #333333; font-weight: bold;">var</span> baz = (_b = <span style="color: teal;">0</span>) !== <span style="color: #333333; font-weight: bold;">null</span> &amp;&amp; _b !== <span style="color: #333333; font-weight: bold;">void</span> <span style="color: teal;">0</span> ? _b : <span style="color: teal;">42</span>;
console.log(baz); <span style="color: #999988; font-style: italic;">// 输出：0</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													通过观察以上代码，我们更加直观的了解到，空值合并运算符是如何解决前面 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">||</code>
													运算符存在的潜在问题。下面我们来介绍空值合并运算符的特性和使用时的一些注意事项。</p>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													3.1 短路</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">当空值合并运算符的左表达式不为 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">null</code>
													或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">undefined</code>
													时，不会对右表达式进行求值。</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">A</span>() </span>{ <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">'A was called'</span>); <span style="color: #333333; font-weight: bold;">return</span> <span style="color: teal;">undefined</span>;}
<span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">B</span>() </span>{ <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">'B was called'</span>); <span style="color: #333333; font-weight: bold;">return</span> <span style="color: teal;">false</span>;}
<span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">C</span>() </span>{ <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">'C was called'</span>); <span style="color: #333333; font-weight: bold;">return</span> <span style="color: #dd1144;">&quot;foo&quot;</span>;}

<span style="color: #0086b3;">console</span>.log(A() ?? C());
<span style="color: #0086b3;">console</span>.log(B() ?? C());
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">上述代码运行后，控制台会输出以下结果：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="shell" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">shell</span>A was called 
C was called 
foo 
B was called 
false 
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													3.2 不能与 &amp;&amp; 或 || 操作符共用</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">若空值合并运算符 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">??</code>
													直接与 AND（&amp;&amp;）和 OR（||）操作符组合使用 ?? 是不行的。这种情况下会抛出 SyntaxError。</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #999988; font-style: italic;">// '||' and '??' operations cannot be mixed without parentheses.(5076)</span>
<span style="color: teal;">null</span> || <span style="color: teal;">undefined</span> ?? <span style="color: #dd1144;">&quot;foo&quot;</span>; <span style="color: #999988; font-style: italic;">// raises a SyntaxError</span>

<span style="color: #999988; font-style: italic;">// '&amp;&amp;' and '??' operations cannot be mixed without parentheses.(5076)</span>
<span style="color: teal;">true</span> &amp;&amp; <span style="color: teal;">undefined</span> ?? <span style="color: #dd1144;">&quot;foo&quot;</span>; <span style="color: #999988; font-style: italic;">// raises a SyntaxError</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">但当使用括号来显式表明优先级时是可行的，比如：
												</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span>(<span style="color: teal;">null</span> || <span style="color: teal;">undefined</span> ) ?? <span style="color: #dd1144;">&quot;foo&quot;</span>; <span style="color: #999988; font-style: italic;">// 返回 &quot;foo&quot;</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													3.3 与可选链操作符 ?. 的关系</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">空值合并运算符针对 undefined 与
													null 这两个值，可选链式操作符 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">?.</code>
													也是如此。可选链式操作符，对于访问属性可能为 undefined 与 null 的对象时非常有用。</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">interface</span> Customer {
  <span>name</span>: <span style="color: #0086b3;">string</span>;
  city?: <span style="color: #0086b3;">string</span>;
}

<span style="color: #333333; font-weight: bold;">let</span> customer: Customer = {
  <span>name</span>: <span style="color: #dd1144;">&quot;Semlinker&quot;</span>
};

<span style="color: #333333; font-weight: bold;">let</span> customerCity = customer?.city ?? <span style="color: #dd1144;">&quot;Unknown city&quot;</span>;
<span style="color: #0086b3;">console</span>.log(customerCity); <span style="color: #999988; font-style: italic;">// 输出：Unknown city</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													前面我们已经介绍了空值合并运算符的应用场景和使用时的一些注意事项，该运算符不仅可以在 TypeScript 3.7 以上版本中使用。当然你也可以在 JavaScript
													的环境中使用它，但你需要借助 Babel，在 Babel 7.8.0 版本也开始支持空值合并运算符。</p>
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													四、?: 可选属性</h3>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													在面向对象语言中，接口是一个很重要的概念，它是对行为的抽象，而具体如何行动需要由类去实现。 <strong style="font-weight: bold;">TypeScript
														中的接口是一个非常灵活的概念，除了可用于对类的一部分行为进行抽象以外，也常用于对「对象的形状（Shape）」进行描述</strong>。</p>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在 TypeScript 中使用 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">interface</code>
													关键字就可以声明一个接口：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">interface</span> Person {
  <span>name</span>: <span style="color: #0086b3;">string</span>;
  age: <span style="color: #0086b3;">number</span>;
}

<span style="color: #333333; font-weight: bold;">let</span> semlinker: Person = {
  <span>name</span>: <span style="color: #dd1144;">&quot;semlinker&quot;</span>,
  <span>age</span>: <span style="color: teal;">33</span>,
};
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在以上代码中，我们声明了 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Person</code>
													接口，它包含了两个必填的属性 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">name</code>
													和 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">age</code>。在初始化
													Person 类型变量时，如果缺少某个属性，TypeScript 编译器就会提示相应的错误信息，比如：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #999988; font-style: italic;">// Property 'age' is missing in type '{ name: string; }' but required in type 'Person'.(2741)</span>
<span style="color: #333333; font-weight: bold;">let</span> lolo: Person  = { <span style="color: #999988; font-style: italic;">// Error</span>
  <span>name</span>: <span style="color: #dd1144;">&quot;lolo&quot;</span>  
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													为了解决上述的问题，我们可以把某个属性声明为可选的：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">interface</span> Person {
  <span>name</span>: <span style="color: #0086b3;">string</span>;
  age?: <span style="color: #0086b3;">number</span>;
}

<span style="color: #333333; font-weight: bold;">let</span> lolo: Person  = {
  <span>name</span>: <span style="color: #dd1144;">&quot;lolo&quot;</span>  
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													4.1 工具类型</h4>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													4.1.1 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Partial&lt;T&gt;</code>
												</h5>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													在实际项目开发过程中，为了提高代码复用率，我们可以利用 TypeScript 内置的工具类型 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Partial&lt;T&gt;</code>
													来快速把某个接口类型中定义的属性变成可选的：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">interface</span> PullDownRefreshConfig {
  <span>threshold</span>: <span style="color: #0086b3;">number</span>;
  stop: <span style="color: #0086b3;">number</span>;
}

<span style="color: #999988; font-style: italic;">/**
 * type PullDownRefreshOptions = {
 *   threshold?: number | undefined;
 *   stop?: number | undefined;
 * }
 */</span> 
<span style="color: #333333; font-weight: bold;">type</span> PullDownRefreshOptions = Partial&lt;PullDownRefreshConfig&gt;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">是不是觉得 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Partial&lt;T&gt;</code>
													很方便，下面让我们来看一下它是如何实现的：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #999988; font-style: italic;">/**
 * Make all properties in T optional
 */</span>
<span style="color: #333333; font-weight: bold;">type</span> Partial&lt;T&gt; = {
  [P <span style="color: #333333; font-weight: bold;">in</span> keyof T]?: T[P];
};
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													4.1.2 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Required&lt;T&gt;</code>
												</h5>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													既然可以快速地把某个接口中定义的属性全部声明为可选，那能不能把所有的可选的属性变成必选的呢？答案是可以的，针对这个需求，我们可以使用 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Required&lt;T&gt;</code>
													工具类型，具体的使用方式如下：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">interface</span> PullDownRefreshConfig {
  <span>threshold</span>: <span style="color: #0086b3;">number</span>;
  stop: <span style="color: #0086b3;">number</span>;
}

<span style="color: #333333; font-weight: bold;">type</span> PullDownRefreshOptions = Partial&lt;PullDownRefreshConfig&gt;

<span style="color: #999988; font-style: italic;">/**
 * type PullDownRefresh = {
 *   threshold: number;
 *   stop: number;
 * }
 */</span>
<span style="color: #333333; font-weight: bold;">type</span> PullDownRefresh = Required&lt;Partial&lt;PullDownRefreshConfig&gt;&gt;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">同样，我们来看一下 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Required&lt;T&gt;</code>
													工具类型是如何实现的：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #999988; font-style: italic;">/**
 * Make all properties in T required
 */</span>
<span style="color: #333333; font-weight: bold;">type</span> Required&lt;T&gt; = {
  [P <span style="color: #333333; font-weight: bold;">in</span> keyof T]-?: T[P];
};
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">原来在 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Required&lt;T&gt;</code>
													工具类型内部，通过 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">-?</code>
													移除了可选属性中的 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">?</code>，使得属性从可选变为必选的。
												</p>
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													五、&amp; 运算符</h3>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在 TypeScript
													中交叉类型是将多个类型合并为一个类型。通过 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&amp;</code>
													运算符可以将现有的多种类型叠加到一起成为一种类型，它包含了所需的所有类型的特性。</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">type</span> PartialPointX = { <span>x</span>: <span style="color: #0086b3;">number</span>; };
<span style="color: #333333; font-weight: bold;">type</span> Point = PartialPointX &amp; { <span>y</span>: <span style="color: #0086b3;">number</span>; };

<span style="color: #333333; font-weight: bold;">let</span> point: Point = {
  <span>x</span>: <span style="color: teal;">1</span>,
  <span>y</span>: <span style="color: teal;">1</span>
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在上面代码中我们先定义了 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">PartialPointX</code>
													类型，接着使用 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&amp;</code>
													运算符创建一个新的 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Point</code>
													类型，表示一个含有 x 和 y 坐标的点，然后定义了一个 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Point</code>
													类型的变量并初始化。</p>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													5.1 同名基础类型属性的合并</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													那么现在问题来了，假设在合并多个类型的过程中，刚好出现某些类型存在相同的成员，但对应的类型又不一致，比如：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">interface</span> X {
  <span>c</span>: <span style="color: #0086b3;">string</span>;
  d: <span style="color: #0086b3;">string</span>;
}

<span style="color: #333333; font-weight: bold;">interface</span> Y {
  <span>c</span>: <span style="color: #0086b3;">number</span>;
  e: <span style="color: #0086b3;">string</span>
}

<span style="color: #333333; font-weight: bold;">type</span> XY = X &amp; Y;
<span style="color: #333333; font-weight: bold;">type</span> YX = Y &amp; X;

<span style="color: #333333; font-weight: bold;">let</span> p: XY;
<span style="color: #333333; font-weight: bold;">let</span> q: YX;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在上面的代码中，接口 X 和接口 Y
													都含有一个相同的成员 c，但它们的类型不一致。对于这种情况，此时 XY 类型或 YX 类型中成员 c 的类型是不是可以是 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">string</code>
													或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">number</code>
													类型呢？比如下面的例子：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span>p = { <span>c</span>: <span style="color: teal;">6</span>, <span>d</span>: <span style="color: #dd1144;">&quot;d&quot;</span>, <span>e</span>: <span style="color: #dd1144;">&quot;e&quot;</span> }; 
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<img alt="5d8ea801141a463bbdacb9685b031624~tplv-k3u1fbpfcp-watermark.webp (950×260)"
													src="https://app.yinxiang.com/shard/s42/res/1bd848ac-9f7a-4cf0-9449-ef519a03386c/5d8ea801141a463bbdacb9685b031624~tplv-k3u1fbpfcp-watermark.webp"></img>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span>q = { <span>c</span>: <span style="color: #dd1144;">&quot;c&quot;</span>, <span>d</span>: <span style="color: #dd1144;">&quot;d&quot;</span>, <span>e</span>: <span style="color: #dd1144;">&quot;e&quot;</span> }; 
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<img alt="a100a053ea90417081a89f78496d8c2b~tplv-k3u1fbpfcp-watermark.webp (950×216)"
													src="https://app.yinxiang.com/shard/s42/res/8c6cbe7a-0ade-426a-8f54-fa2ef18e8e4d/a100a053ea90417081a89f78496d8c2b~tplv-k3u1fbpfcp-watermark.webp"></img>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">为什么接口 X 和接口 Y 混入后，成员 c
													的类型会变成 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">never</code>
													呢？这是因为混入后成员 c 的类型为 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">string &amp; number</code>，即成员
													c 的类型既可以是 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">string</code>
													类型又可以是 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">number</code>
													类型。很明显这种类型是不存在的，所以混入后成员 c 的类型为 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">never</code>。
												</p>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													5.2 同名非基础类型属性的合并</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在上面示例中，刚好接口 X 和接口 Y
													中内部成员 c 的类型都是基本数据类型，那么如果是非基本数据类型的话，又会是什么情形。我们来看个具体的例子：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">interface</span> D { d: <span style="color: #0086b3;">boolean</span>; }
<span style="color: #333333; font-weight: bold;">interface</span> E { e: <span style="color: #0086b3;">string</span>; }
<span style="color: #333333; font-weight: bold;">interface</span> F { f: <span style="color: #0086b3;">number</span>; }

<span style="color: #333333; font-weight: bold;">interface</span> A { x: D; }
<span style="color: #333333; font-weight: bold;">interface</span> B { x: E; }
<span style="color: #333333; font-weight: bold;">interface</span> C { x: F; }

<span style="color: #333333; font-weight: bold;">type</span> ABC = A &amp; B &amp; C;

<span style="color: #333333; font-weight: bold;">let</span> abc: ABC = {
  <span>x</span>: {
    <span>d</span>: <span style="color: teal;">true</span>,
    <span>e</span>: <span style="color: #dd1144;">'semlinker'</span>,
    <span>f</span>: <span style="color: teal;">666</span>
  }
};

<span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">'abc:'</span>, abc);
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">以上代码成功运行后，控制台会输出以下结果：
												</p><img alt="35a986a21c8a40028bb46765c30fa909~tplv-k3u1fbpfcp-watermark.webp (790×260)"
													src="https://app.yinxiang.com/shard/s42/res/aa1d1d17-e91b-4153-998f-cec955da42a1/35a986a21c8a40028bb46765c30fa909~tplv-k3u1fbpfcp-watermark.webp"></img>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													由上图可知，在混入多个类型时，若存在相同的成员，且成员类型为非基本数据类型，那么是可以成功合并。</p>
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													六、| 分隔符</h3>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在 TypeScript 中联合类型（Union
													Types）表示取值可以为多种类型中的一种，联合类型使用 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">|</code>
													分隔每个类型。联合类型通常与 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">null</code>
													或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">undefined</code>
													一起使用：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">const</span> sayHello = <span>(<span>name: <span style="color: #0086b3;">string</span> | <span style="color: teal;">undefined</span></span>) =&gt;</span> { <span style="color: #999988; font-style: italic;">/* ... */</span> };
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">以上示例中 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">name</code>
													的类型是 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">string | undefined</code>
													意味着可以将 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">string</code>
													或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">undefined</code>
													的值传递给 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">sayHello</code>
													函数。</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span>sayHello(<span style="color: #dd1144;">&quot;semlinker&quot;</span>);
sayHello(<span style="color: teal;">undefined</span>);
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">此外，对于联合类型来说，你可能会遇到以下的用法：
												</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">let</span> num: <span style="color: teal;">1</span> | <span style="color: teal;">2</span> = <span style="color: teal;">1</span>;
<span style="color: #333333; font-weight: bold;">type</span> EventNames = <span style="color: #dd1144;">'click'</span> | <span style="color: #dd1144;">'scroll'</span> | <span style="color: #dd1144;">'mousemove'</span>;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">示例中的 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">1</code>、<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">2</code>
													或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">'click'</code>
													被称为字面量类型，用来约束取值只能是某几个值中的一个。</p>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													6.1 类型保护</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													当使用联合类型时，我们必须尽量把当前值的类型收窄为当前值的实际类型，而类型保护就是实现类型收窄的一种手段。</p>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													类型保护是可执行运行时检查的一种表达式，用于确保该类型在一定的范围内。换句话说，类型保护可以保证一个字符串是一个字符串，尽管它的值也可以是一个数字。类型保护与特性检测并不是完全不同，其主要思想是尝试检测属性、方法或原型，以确定如何处理值。
												</p>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">目前主要有四种的方式来实现类型保护：</p>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													6.1.1 in 关键字</h5>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">interface</span> Admin {
  <span>name</span>: <span style="color: #0086b3;">string</span>;
  privileges: <span style="color: #0086b3;">string</span>[];
}

<span style="color: #333333; font-weight: bold;">interface</span> Employee {
  <span>name</span>: <span style="color: #0086b3;">string</span>;
  startDate: <span style="color: #0086b3;">Date</span>;
}

<span style="color: #333333; font-weight: bold;">type</span> UnknownEmployee = Employee | Admin;

<span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">printEmployeeInformation</span>(<span>emp: UnknownEmployee</span>) </span>{
  <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">&quot;Name: &quot;</span> + emp.name);
  <span style="color: #333333; font-weight: bold;">if</span> (<span style="color: #dd1144;">&quot;privileges&quot;</span> <span style="color: #333333; font-weight: bold;">in</span> emp) {
    <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">&quot;Privileges: &quot;</span> + emp.privileges);
  }
  <span style="color: #333333; font-weight: bold;">if</span> (<span style="color: #dd1144;">&quot;startDate&quot;</span> <span style="color: #333333; font-weight: bold;">in</span> emp) {
    <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">&quot;Start Date: &quot;</span> + emp.startDate);
  }
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													6.1.2 typeof 关键字</h5>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">padLeft</span>(<span>value: <span style="color: #0086b3;">string</span>, padding: <span style="color: #0086b3;">string</span> | <span style="color: #0086b3;">number</span></span>) </span>{
  <span style="color: #333333; font-weight: bold;">if</span> (<span style="color: #333333; font-weight: bold;">typeof</span> padding === <span style="color: #dd1144;">&quot;number&quot;</span>) {
      <span style="color: #333333; font-weight: bold;">return</span> <span style="color: #0086b3;">Array</span>(padding + <span style="color: teal;">1</span>).join(<span style="color: #dd1144;">&quot; &quot;</span>) + value;
  }
  <span style="color: #333333; font-weight: bold;">if</span> (<span style="color: #333333; font-weight: bold;">typeof</span> padding === <span style="color: #dd1144;">&quot;string&quot;</span>) {
      <span style="color: #333333; font-weight: bold;">return</span> padding + value;
  }
  <span style="color: #333333; font-weight: bold;">throw</span> <span style="color: #333333; font-weight: bold;">new</span> <span style="color: #0086b3;">Error</span>(<span style="color: #dd1144;">`Expected string or number, got '<span style="color: #333333; font-weight: 400;">${padding}</span>'.`</span>);
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;"><code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">typeof</code>
													类型保护只支持两种形式：<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">typeof v === &quot;typename&quot;</code>
													和 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">typeof v !== typename</code>，<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&quot;typename&quot;</code>
													必须是 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&quot;number&quot;</code>，
													<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&quot;string&quot;</code>，
													<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&quot;boolean&quot;</code>
													或 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&quot;symbol&quot;</code>。
													但是 TypeScript 并不会阻止你与其它字符串比较，语言不会把那些表达式识别为类型保护。</p>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													6.1.3 instanceof 关键字</h5>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">interface</span> Padder {
  getPaddingString(): <span style="color: #0086b3;">string</span>;
}

<span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">SpaceRepeatingPadder</span> <span style="color: #445588; font-weight: bold;">implements</span> <span style="color: #445588; font-weight: bold;">Padder</span> </span>{
  <span><span style="color: #990000; font-weight: bold;">constructor</span>(<span><span style="color: #333333; font-weight: bold;">private</span> numSpaces: <span style="color: #0086b3;">number</span></span>)</span> {}
  <span><span style="color: #990000; font-weight: bold;">getPaddingString</span>()</span> {
    <span style="color: #333333; font-weight: bold;">return</span> <span style="color: #0086b3;">Array</span>(<span style="color: #0086b3;">this</span>.numSpaces + <span style="color: teal;">1</span>).join(<span style="color: #dd1144;">&quot; &quot;</span>);
  }
}

<span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">StringPadder</span> <span style="color: #445588; font-weight: bold;">implements</span> <span style="color: #445588; font-weight: bold;">Padder</span> </span>{
  <span><span style="color: #990000; font-weight: bold;">constructor</span>(<span><span style="color: #333333; font-weight: bold;">private</span> value: <span style="color: #0086b3;">string</span></span>)</span> {}
  <span><span style="color: #990000; font-weight: bold;">getPaddingString</span>()</span> {
    <span style="color: #333333; font-weight: bold;">return</span> <span style="color: #0086b3;">this</span>.value;
  }
}

<span style="color: #333333; font-weight: bold;">let</span> padder: Padder = <span style="color: #333333; font-weight: bold;">new</span> SpaceRepeatingPadder(<span style="color: teal;">6</span>);

<span style="color: #333333; font-weight: bold;">if</span> (padder <span style="color: #333333; font-weight: bold;">instanceof</span> SpaceRepeatingPadder) {
  <span style="color: #999988; font-style: italic;">// padder的类型收窄为 'SpaceRepeatingPadder'</span>
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													6.1.4 自定义类型保护的类型谓词（type predicate）</h5>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">isNumber</span>(<span>x: <span style="color: #0086b3;">any</span></span>): <span style="color: #990000; font-weight: bold;">x</span> <span style="color: #990000; font-weight: bold;">is</span> <span style="color: #990000; font-weight: bold;">number</span> </span>{
  <span style="color: #333333; font-weight: bold;">return</span> <span style="color: #333333; font-weight: bold;">typeof</span> x === <span style="color: #dd1144;">&quot;number&quot;</span>;
}

<span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">isString</span>(<span>x: <span style="color: #0086b3;">any</span></span>): <span style="color: #990000; font-weight: bold;">x</span> <span style="color: #990000; font-weight: bold;">is</span> <span style="color: #990000; font-weight: bold;">string</span> </span>{
  <span style="color: #333333; font-weight: bold;">return</span> <span style="color: #333333; font-weight: bold;">typeof</span> x === <span style="color: #dd1144;">&quot;string&quot;</span>;
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													七、_ 数字分隔符</h3>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">TypeScript 2.7
													带来了对数字分隔符的支持，正如数值分隔符 ECMAScript 提案中所概述的那样。对于一个数字字面量，你现在可以通过把一个下划线作为它们之间的分隔符来分组数字：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">const</span> inhabitantsOfMunich = <span style="color: teal;">1_464_301</span>;
<span style="color: #333333; font-weight: bold;">const</span> distanceEarthSunInKm = <span style="color: teal;">149_600_000</span>;
<span style="color: #333333; font-weight: bold;">const</span> fileSystemPermission = <span style="color: teal;">0b111_111_000</span>;
<span style="color: #333333; font-weight: bold;">const</span> bytes = <span style="color: teal;">0b1111_10101011_11110000_00001101</span>;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													分隔符不会改变数值字面量的值，但逻辑分组使人们更容易一眼就能读懂数字。以上 TS 代码经过编译后，会生成以下 ES5 代码：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #999999; font-weight: bold;">&quot;use strict&quot;</span>;
<span style="color: #333333; font-weight: bold;">var</span> inhabitantsOfMunich = <span style="color: teal;">1464301</span>;
<span style="color: #333333; font-weight: bold;">var</span> distanceEarthSunInKm = <span style="color: teal;">149600000</span>;
<span style="color: #333333; font-weight: bold;">var</span> fileSystemPermission = <span style="color: teal;">504</span>;
<span style="color: #333333; font-weight: bold;">var</span> bytes = <span style="color: teal;">262926349</span>;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													7.1 使用限制</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													虽然数字分隔符看起来很简单，但在使用时还是有一些限制。比如你只能在两个数字之间添加 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">_</code>
													分隔符。以下的使用方式是非法的：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #999988; font-style: italic;">// Numeric separators are not allowed here.(6188)</span>
3_<span style="color: teal;">.141592</span> <span style="color: #999988; font-style: italic;">// Error</span>
<span style="color: teal;">3.</span>_141592 <span style="color: #999988; font-style: italic;">// Error</span>

<span style="color: #999988; font-style: italic;">// Numeric separators are not allowed here.(6188)</span>
1_e10 <span style="color: #999988; font-style: italic;">// Error</span>
1e_10 <span style="color: #999988; font-style: italic;">// Error</span>

<span style="color: #999988; font-style: italic;">// Cannot find name '_126301'.(2304)</span>
_126301  <span style="color: #999988; font-style: italic;">// Error</span>
<span style="color: #999988; font-style: italic;">// Numeric separators are not allowed here.(6188)</span>
126301_ <span style="color: #999988; font-style: italic;">// Error</span>

<span style="color: #999988; font-style: italic;">// Cannot find name 'b111111000'.(2304)</span>
<span style="color: #999988; font-style: italic;">// An identifier or keyword cannot immediately follow a numeric literal.(1351)</span>
0_b111111000 <span style="color: #999988; font-style: italic;">// Error</span>

<span style="color: #999988; font-style: italic;">// Numeric separators are not allowed here.(6188)</span>
0b_111111000 <span style="color: #999988; font-style: italic;">// Error</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">当然你也不能连续使用多个 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">_</code>
													分隔符，比如：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #999988; font-style: italic;">// Multiple consecutive numeric separators are not permitted.(6189)</span>
123__456 <span style="color: #999988; font-style: italic;">// Error</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													7.2 解析分隔符</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													此外，需要注意的是以下用于解析数字的函数是不支持分隔符：</p>
												<ul style="padding: 0px; margin: 0px; padding-left: 28px;">
													<li style="margin-bottom: 0px; list-style: inherit;"><code
															style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Number()</code>
													</li>
													<li style="margin-bottom: 0px; list-style: inherit;"><code
															style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">parseInt()</code>
													</li>
													<li style="margin-bottom: 0px; list-style: inherit;"><code
															style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">parseFloat()</code>
													</li>
												</ul>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">这里我们来看一下实际的例子：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span style="color: #0086b3;">Number</span>(<span style="color: #dd1144;">'123_456'</span>)
<span style="color: teal;">NaN</span>
<span style="color: #0086b3;">parseInt</span>(<span style="color: #dd1144;">'123_456'</span>)
<span style="color: teal;">123</span>
<span style="color: #0086b3;">parseFloat</span>(<span style="color: #dd1144;">'123_456'</span>)
<span style="color: teal;">123</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													很明显对于以上的结果不是我们所期望的，所以在处理分隔符时要特别注意。当然要解决上述问题，也很简单只需要非数字的字符删掉即可。这里我们来定义一个 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">removeNonDigits</code>
													的函数：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span style="color: #333333; font-weight: bold;">const</span> RE_NON_DIGIT = <span style="color: #009926;">/[^0-9]/gu</span>;

<span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">removeNonDigits</span>(<span>str</span>) </span>{
  str = str.replace(RE_NON_DIGIT, <span style="color: #dd1144;">''</span>);
  <span style="color: #333333; font-weight: bold;">return</span> <span style="color: #0086b3;">Number</span>(str);
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">该函数通过调用字符串的 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">replace</code>
													方法来移除非数字的字符，具体的使用方式如下：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span>removeNonDigits(<span style="color: #dd1144;">'123_456'</span>)
<span style="color: teal;">123456</span>
removeNonDigits(<span style="color: #dd1144;">'149,600,000'</span>)
<span style="color: teal;">149600000</span>
removeNonDigits(<span style="color: #dd1144;">'1,407,836'</span>)
<span style="color: teal;">1407836</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													八、<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&lt;Type&gt;</code>
													语法</h3>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													8.1 TypeScript 断言</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">有时候你会遇到这样的情况，你会比
													TypeScript 更了解某个值的详细信息。通常这会发生在你清楚地知道一个实体具有比它现有类型更确切的类型。</p>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													通过类型断言这种方式可以告诉编译器，“相信我，我知道自己在干什么”。类型断言好比其他语言里的类型转换，但是不进行特殊的数据检查和解构。它没有运行时的影响，只是在编译阶段起作用。</p>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">类型断言有两种形式：</p>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													8.1.1 “尖括号” 语法</h5>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">let</span> someValue: <span style="color: #0086b3;">any</span> = <span style="color: #dd1144;">&quot;this is a string&quot;</span>;
<span style="color: #333333; font-weight: bold;">let</span> strLength: <span style="color: #0086b3;">number</span> = (&lt;<span style="color: #0086b3;">string</span>&gt;someValue).length;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													8.1.2 as 语法</h5>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">let</span> someValue: <span style="color: #0086b3;">any</span> = <span style="color: #dd1144;">&quot;this is a string&quot;</span>;
<span style="color: #333333; font-weight: bold;">let</span> strLength: <span style="color: #0086b3;">number</span> = (someValue <span style="color: #333333; font-weight: bold;">as</span> <span style="color: #0086b3;">string</span>).length;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													8.2 TypeScript 泛型</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">对于刚接触 TypeScript
													泛型的读者来说，首次看到 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">&lt;T&gt;</code>
													语法会感到陌生。其实它没有什么特别，就像传递参数一样，我们传递了我们想要用于特定函数调用的类型。</p>
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													九、@XXX 装饰器</h3>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													9.1 装饰器语法</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">对于一些刚接触 TypeScript
													的小伙伴来说，在第一次看到 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">@Plugin({...})</code>
													这种语法可能会觉得很惊讶。其实这是装饰器的语法，装饰器的本质是一个函数，通过装饰器我们可以方便地定义与对象相关的元数据。</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #999999; font-weight: bold;">@Plugin</span>({
  <span>pluginName</span>: <span style="color: #dd1144;">'Device'</span>,
  <span>plugin</span>: <span style="color: #dd1144;">'cordova-plugin-device'</span>,
  <span>pluginRef</span>: <span style="color: #dd1144;">'device'</span>,
  <span>repo</span>: <span style="color: #dd1144;">'https://github.com/apache/cordova-plugin-device'</span>,
  <span>platforms</span>: [<span style="color: #dd1144;">'Android'</span>, <span style="color: #dd1144;">'Browser'</span>, <span style="color: #dd1144;">'iOS'</span>, <span style="color: #dd1144;">'macOS'</span>, <span style="color: #dd1144;">'Windows'</span>],
})
<span style="color: #999999; font-weight: bold;">@Injectable</span>()
<span style="color: #333333; font-weight: bold;">export</span> <span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">Device</span> <span style="color: #333333; font-weight: bold;">extends</span> <span style="color: #445588; font-weight: bold;">IonicNativePlugin</span> </span>{}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在以上代码中，我们通过装饰器来保存
													ionic-native 插件的相关元信息，而 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">@Plugin({...})</code>
													中的 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">@</code>
													符号只是语法糖，为什么说是语法糖呢？这里我们来看一下编译生成的 ES5 代码：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span style="color: #333333; font-weight: bold;">var</span> __decorate = (<span style="color: #0086b3;">this</span> &amp;&amp; <span style="color: #0086b3;">this</span>.__decorate) || <span><span style="color: #333333; font-weight: bold;">function</span> (<span>decorators, target, key, desc</span>) </span>{
    <span style="color: #333333; font-weight: bold;">var</span> c = <span style="color: #0086b3;">arguments</span>.length, r = c &lt; <span style="color: teal;">3</span> ? target : desc === <span style="color: teal;">null</span> ? desc = <span style="color: #0086b3;">Object</span>.getOwnPropertyDescriptor(target, key) : desc, d;
    <span style="color: #333333; font-weight: bold;">if</span> (<span style="color: #333333; font-weight: bold;">typeof</span> <span style="color: #0086b3;">Reflect</span> === <span style="color: #dd1144;">&quot;object&quot;</span> &amp;&amp; <span style="color: #333333; font-weight: bold;">typeof</span> <span style="color: #0086b3;">Reflect</span>.decorate === <span style="color: #dd1144;">&quot;function&quot;</span>) r = <span style="color: #0086b3;">Reflect</span>.decorate(decorators, target, key, desc);
    <span style="color: #333333; font-weight: bold;">else</span> <span style="color: #333333; font-weight: bold;">for</span> (<span style="color: #333333; font-weight: bold;">var</span> i = decorators.length - <span style="color: teal;">1</span>; i &gt;= <span style="color: teal;">0</span>; i--) <span style="color: #333333; font-weight: bold;">if</span> (d = decorators[i]) r = (c &lt; <span style="color: teal;">3</span> ? d(r) : c &gt; <span style="color: teal;">3</span> ? d(target, key, r) : d(target, key)) || r;
    <span style="color: #333333; font-weight: bold;">return</span> c &gt; <span style="color: teal;">3</span> &amp;&amp; r &amp;&amp; <span style="color: #0086b3;">Object</span>.defineProperty(target, key, r), r;
};

<span style="color: #333333; font-weight: bold;">var</span> Device = <span style="color: #999988; font-style: italic;">/** <span style="color: #dd1144;">@class </span>*/</span> (<span><span style="color: #333333; font-weight: bold;">function</span> (<span>_super</span>) </span>{
    __extends(Device, _super);
    <span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">Device</span>() </span>{
        <span style="color: #333333; font-weight: bold;">return</span> _super !== <span style="color: teal;">null</span> &amp;&amp; _super.apply(<span style="color: #0086b3;">this</span>, <span style="color: #0086b3;">arguments</span>) || <span style="color: #0086b3;">this</span>;
    }
    Device = __decorate([
        Plugin({
            <span>pluginName</span>: <span style="color: #dd1144;">'Device'</span>,
            <span>plugin</span>: <span style="color: #dd1144;">'cordova-plugin-device'</span>,
            <span>pluginRef</span>: <span style="color: #dd1144;">'device'</span>,
            <span>repo</span>: <span style="color: #dd1144;">'https://github.com/apache/cordova-plugin-device'</span>,
            <span>platforms</span>: [<span style="color: #dd1144;">'Android'</span>, <span style="color: #dd1144;">'Browser'</span>, <span style="color: #dd1144;">'iOS'</span>, <span style="color: #dd1144;">'macOS'</span>, <span style="color: #dd1144;">'Windows'</span>],
        }),
        Injectable()
    ], Device);
    <span style="color: #333333; font-weight: bold;">return</span> Device;
}(IonicNativePlugin));
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">通过生成的代码可知，<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">@Plugin({...})</code>
													和 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">@Injectable()</code>
													最终会被转换成普通的方法调用，它们的调用结果最终会以数组的形式作为参数传递给 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">__decorate</code>
													函数，而在 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">__decorate</code>
													函数内部会以 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Device</code>
													类作为参数调用各自的类型装饰器，从而扩展对应的功能。</p>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													9.2 装饰器的分类</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在 TypeScript
													中装饰器分为类装饰器、属性装饰器、方法装饰器和参数装饰器四大类。</p>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													9.2.1 类装饰器</h5>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">类装饰器声明：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">declare</span> <span style="color: #333333; font-weight: bold;">type</span> ClassDecorator = <span><span style="color: navy; font-weight: 400;">&lt;<span style="color: navy; font-weight: 400;">TFunction</span> <span style="color: teal;">extends</span> <span style="color: teal;">Function</span>&gt;</span>(
  target: TFunction
) =&gt; TFunction | void;
</span><span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													类装饰器顾名思义，就是用来装饰类的。它接收一个参数：</p>
												<ul style="padding: 0px; margin: 0px; padding-left: 28px;">
													<li style="margin-bottom: 0px; list-style: inherit;">target: TFunction - 被装饰的类</li>
												</ul>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													看完第一眼后，是不是感觉都不好了。没事，我们马上来个例子：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">Greeter</span>(<span>target: <span style="color: #0086b3;">Function</span></span>): <span style="color: #990000; font-weight: bold;">void</span> </span>{
  target.prototype.greet = <span><span style="color: #333333; font-weight: bold;">function</span> (): <span style="color: #990000; font-weight: bold;">void</span> </span>{
    <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">&quot;Hello Semlinker!&quot;</span>);
  };
}

<span style="color: #999999; font-weight: bold;">@Greeter</span>
<span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">Greeting</span> </span>{
  <span><span style="color: #990000; font-weight: bold;">constructor</span>()</span> {
    <span style="color: #999988; font-style: italic;">// 内部实现</span>
  }
}

<span style="color: #333333; font-weight: bold;">let</span> myGreeting = <span style="color: #333333; font-weight: bold;">new</span> Greeting();
(myGreeting <span style="color: #333333; font-weight: bold;">as</span> <span style="color: #0086b3;">any</span>).greet(); <span style="color: #999988; font-style: italic;">// console output: 'Hello Semlinker!';</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">上面的例子中，我们定义了 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Greeter</code>
													类装饰器，同时我们使用了 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">@Greeter</code>
													语法糖，来使用装饰器。</p>
												<blockquote
													style="color: #666666; padding: 1px 23px; margin: 22px 0px; border-left: 4px solid #cbcbcb; background-color: #f8f8f8;">
													<p style="line-height: inherit; margin: 10px 0px;">友情提示：读者可以直接复制上面的代码，在 <a
															href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.typescriptlang.org%2Fplay%2Findex.html"
															rel="nofollow noopener noreferrer" shape="rect"
															style="background-color: transparent; margin: initial; cursor: pointer; border-bottom: 1px solid #d1e9ff; text-decoration: none; color: #0269c8;"
															target="_blank" title="https://www.typescriptlang.org/play/index.html">TypeScript
															Playground</a> 中运行查看结果。</p><span style="color: #666666; display: block;"></span>
												</blockquote>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													9.2.2 属性装饰器</h5>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">属性装饰器声明：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">declare</span> <span style="color: #333333; font-weight: bold;">type</span> PropertyDecorator = <span>(<span>target:<span style="color: #0086b3;">Object</span>, 
  propertyKey: <span style="color: #0086b3;">string</span> | symbol </span>) =&gt;</span> <span style="color: #0086b3;">void</span>;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													属性装饰器顾名思义，用来装饰类的属性。它接收两个参数：</p>
												<ul style="padding: 0px; margin: 0px; padding-left: 28px;">
													<li style="margin-bottom: 0px; list-style: inherit;">target: Object - 被装饰的类</li>
													<li style="margin-bottom: 0px; list-style: inherit;">propertyKey: string | symbol - 被装饰类的属性名
													</li>
												</ul>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">趁热打铁，马上来个例子热热身：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">logProperty</span>(<span>target: <span style="color: #0086b3;">any</span>, key: <span style="color: #0086b3;">string</span></span>) </span>{
  <span style="color: #333333; font-weight: bold;">delete</span> target[key];

  <span style="color: #333333; font-weight: bold;">const</span> backingField = <span style="color: #dd1144;">&quot;_&quot;</span> + key;

  <span style="color: #0086b3;">Object</span>.defineProperty(target, backingField, {
    <span>writable</span>: <span style="color: teal;">true</span>,
    <span>enumerable</span>: <span style="color: teal;">true</span>,
    <span>configurable</span>: <span style="color: teal;">true</span>
  });

  <span style="color: #999988; font-style: italic;">// property getter</span>
  <span style="color: #333333; font-weight: bold;">const</span> getter = <span><span style="color: #333333; font-weight: bold;">function</span> (<span><span style="color: #0086b3;">this</span>: <span style="color: #0086b3;">any</span></span>) </span>{
    <span style="color: #333333; font-weight: bold;">const</span> currVal = <span style="color: #0086b3;">this</span>[backingField];
    <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">`Get: <span style="color: #333333; font-weight: 400;">${key}</span> =&gt; <span style="color: #333333; font-weight: 400;">${currVal}</span>`</span>);
    <span style="color: #333333; font-weight: bold;">return</span> currVal;
  };

  <span style="color: #999988; font-style: italic;">// property setter</span>
  <span style="color: #333333; font-weight: bold;">const</span> setter = <span><span style="color: #333333; font-weight: bold;">function</span> (<span><span style="color: #0086b3;">this</span>: <span style="color: #0086b3;">any</span>, newVal: <span style="color: #0086b3;">any</span></span>) </span>{
    <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">`Set: <span style="color: #333333; font-weight: 400;">${key}</span> =&gt; <span style="color: #333333; font-weight: 400;">${newVal}</span>`</span>);
    <span style="color: #0086b3;">this</span>[backingField] = newVal;
  };

  <span style="color: #999988; font-style: italic;">// Create new property with getter and setter</span>
  <span style="color: #0086b3;">Object</span>.defineProperty(target, key, {
    <span>get</span>: getter,
    <span>set</span>: setter,
    <span>enumerable</span>: <span style="color: teal;">true</span>,
    <span>configurable</span>: <span style="color: teal;">true</span>
  });
}

<span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">Person</span> </span>{ 
  <span style="color: #999999; font-weight: bold;">@logProperty</span>
  <span style="color: #333333; font-weight: bold;">public</span> name: <span style="color: #0086b3;">string</span>;

  <span><span style="color: #990000; font-weight: bold;">constructor</span>(<span>name : <span style="color: #0086b3;">string</span></span>)</span> { 
    <span style="color: #0086b3;">this</span>.name = name;
  }
}

<span style="color: #333333; font-weight: bold;">const</span> p1 = <span style="color: #333333; font-weight: bold;">new</span> Person(<span style="color: #dd1144;">&quot;semlinker&quot;</span>);
p1.name = <span style="color: #dd1144;">&quot;kakuqo&quot;</span>;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">以上代码我们定义了一个 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">logProperty</code>
													函数，来跟踪用户对属性的操作，当代码成功运行后，在控制台会输出以下结果：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; background: #f8f8f8; font-size: 12px; word-break: normal; overflow-x: auto; color: #333333; padding: 15px 12px;">Set: name =&gt; semlinker
Set: name =&gt; kakuqo
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													9.2.3 方法装饰器</h5>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">方法装饰器声明：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">declare</span> <span style="color: #333333; font-weight: bold;">type</span> MethodDecorator = &lt;T&gt;<span>(<span>target:<span style="color: #0086b3;">Object</span>, propertyKey: <span style="color: #0086b3;">string</span> | symbol, 	 	
  descriptor: TypePropertyDescript&lt;T&gt;</span>) =&gt;</span> TypedPropertyDescriptor&lt;T&gt; | <span style="color: #0086b3;">void</span>;
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													方法装饰器顾名思义，用来装饰类的方法。它接收三个参数：</p>
												<ul style="padding: 0px; margin: 0px; padding-left: 28px;">
													<li style="margin-bottom: 0px; list-style: inherit;">target: Object - 被装饰的类</li>
													<li style="margin-bottom: 0px; list-style: inherit;">propertyKey: string | symbol - 方法名</li>
													<li style="margin-bottom: 0px; list-style: inherit;">descriptor: TypePropertyDescript - 属性描述符
													</li>
												</ul>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">废话不多说，直接上例子：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">log</span>(<span>target: <span style="color: #0086b3;">Object</span>, propertyKey: <span style="color: #0086b3;">string</span>, descriptor: PropertyDescriptor</span>) </span>{
  <span style="color: #333333; font-weight: bold;">let</span> originalMethod = descriptor.value;
  descriptor.value = <span><span style="color: #333333; font-weight: bold;">function</span> (<span>...args: <span style="color: #0086b3;">any</span>[]</span>) </span>{
    <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">&quot;wrapped function: before invoking &quot;</span> + propertyKey);
    <span style="color: #333333; font-weight: bold;">let</span> result = originalMethod.apply(<span style="color: #0086b3;">this</span>, args);
    <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">&quot;wrapped function: after invoking &quot;</span> + propertyKey);
    <span style="color: #333333; font-weight: bold;">return</span> result;
  };
}

<span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">Task</span> </span>{
  <span style="color: #999999; font-weight: bold;">@log</span>
  runTask(arg: <span style="color: #0086b3;">any</span>): <span style="color: #0086b3;">any</span> {
    <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">&quot;runTask invoked, args: &quot;</span> + arg);
    <span style="color: #333333; font-weight: bold;">return</span> <span style="color: #dd1144;">&quot;finished&quot;</span>;
  }
}

<span style="color: #333333; font-weight: bold;">let</span> task = <span style="color: #333333; font-weight: bold;">new</span> Task();
<span style="color: #333333; font-weight: bold;">let</span> result = task.runTask(<span style="color: #dd1144;">&quot;learn ts&quot;</span>);
<span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">&quot;result: &quot;</span> + result);
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">以上代码成功运行后，控制台会输出以下结果：
												</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; background: #f8f8f8; font-size: 12px; word-break: normal; overflow-x: auto; color: #333333; padding: 15px 12px;">&quot;wrapped function: before invoking runTask&quot; 
&quot;runTask invoked, args: learn ts&quot; 
&quot;wrapped function: after invoking runTask&quot; 
&quot;result: finished&quot; 
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h5
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													9.2.4 参数装饰器</h5>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">参数装饰器声明：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span style="color: #333333; font-weight: bold;">declare</span> <span style="color: #333333; font-weight: bold;">type</span> ParameterDecorator = <span>(<span>target: <span style="color: #0086b3;">Object</span>, propertyKey: <span style="color: #0086b3;">string</span> | symbol, 
  parameterIndex: <span style="color: #0086b3;">number</span> </span>) =&gt;</span> <span style="color: #0086b3;">void</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">
													参数装饰器顾名思义，是用来装饰函数参数，它接收三个参数：</p>
												<ul style="padding: 0px; margin: 0px; padding-left: 28px;">
													<li style="margin-bottom: 0px; list-style: inherit;">target: Object - 被装饰的类</li>
													<li style="margin-bottom: 0px; list-style: inherit;">propertyKey: string | symbol - 方法名</li>
													<li style="margin-bottom: 0px; list-style: inherit;">parameterIndex: number - 方法中参数的索引值</li>
												</ul>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">Log</span>(<span>target: <span style="color: #0086b3;">Function</span>, key: <span style="color: #0086b3;">string</span>, parameterIndex: <span style="color: #0086b3;">number</span></span>) </span>{
  <span style="color: #333333; font-weight: bold;">let</span> functionLogged = key || target.prototype.constructor.name;
  <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">`The parameter in position <span style="color: #333333; font-weight: 400;">${parameterIndex}</span> at <span style="color: #333333; font-weight: 400;">${functionLogged}</span> has
	been decorated`</span>);
}

<span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">Greeter</span> </span>{
  <span>greeting</span>: <span style="color: #0086b3;">string</span>;
  <span><span style="color: #990000; font-weight: bold;">constructor</span>(<span><span style="color: #999999; font-weight: bold;">@Log</span> phrase: <span style="color: #0086b3;">string</span></span>)</span> {
	<span style="color: #0086b3;">this</span>.greeting = phrase; 
  }
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">以上代码成功运行后，控制台会输出以下结果：
												</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; background: #f8f8f8; font-size: 12px; word-break: normal; overflow-x: auto; color: #333333; padding: 15px 12px;">&quot;The parameter in position 0 at Greeter has been decorated&quot; 
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													十、#XXX 私有字段</h3>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在 TypeScript 3.8 版本就开始支持
													<strong style="font-weight: bold;">ECMAScript 私有字段</strong>，使用方式如下：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">Person</span> </span>{
  #name: <span style="color: #0086b3;">string</span>;

  <span><span style="color: #990000; font-weight: bold;">constructor</span>(<span>name: <span style="color: #0086b3;">string</span></span>)</span> {
    <span style="color: #0086b3;">this</span>.#name = name;
  }

  <span><span style="color: #990000; font-weight: bold;">greet</span>()</span> {
    <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">`Hello, my name is <span style="color: #333333; font-weight: 400;">${<span style="color: #0086b3;">this</span>.#name}</span>!`</span>);
  }
}

<span style="color: #333333; font-weight: bold;">let</span> semlinker = <span style="color: #333333; font-weight: bold;">new</span> Person(<span style="color: #dd1144;">&quot;Semlinker&quot;</span>);

semlinker.#name;
<span style="color: #999988; font-style: italic;">//     ~~~~~</span>
<span style="color: #999988; font-style: italic;">// Property '#name' is not accessible outside class 'Person'</span>
<span style="color: #999988; font-style: italic;">// because it has a private identifier.</span>
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">与常规属性（甚至使用 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">private</code>
													修饰符声明的属性）不同，私有字段要牢记以下规则：</p>
												<ul style="padding: 0px; margin: 0px; padding-left: 28px;">
													<li style="margin-bottom: 0px; list-style: inherit;">私有字段以 <code
															style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">#</code>
														字符开头，有时我们称之为私有名称；</li>
													<li style="margin-bottom: 0px; list-style: inherit;">每个私有字段名称都唯一地限定于其包含的类；</li>
													<li style="margin-bottom: 0px; list-style: inherit;">不能在私有字段上使用 TypeScript 可访问性修饰符（如 public 或
														private）；</li>
													<li style="margin-bottom: 0px; list-style: inherit;">私有字段不能在包含的类之外访问，甚至不能被检测到。</li>
												</ul>
												<h4
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 5px; font-size: 20px;">
													10.1 私有字段与 private 的区别</h4>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">说到这里使用 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">#</code>
													定义的私有字段与 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">private</code>
													修饰符定义字段有什么区别呢？现在我们先来看一个 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">private</code>
													的示例：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="typescript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">typescript</span><span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">Person</span> </span>{
  <span><span style="color: #990000; font-weight: bold;">constructor</span>(<span><span style="color: #333333; font-weight: bold;">private</span> name: <span style="color: #0086b3;">string</span></span>)</span>{}
}

<span style="color: #333333; font-weight: bold;">let</span> person = <span style="color: #333333; font-weight: bold;">new</span> Person(<span style="color: #dd1144;">&quot;Semlinker&quot;</span>);
<span style="color: #0086b3;">console</span>.log(person.name);
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">在上面代码中，我们创建了一个 Person
													类，该类中使用 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">private</code>
													修饰符定义了一个私有属性 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">name</code>，接着使用该类创建一个
													<code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">person</code>
													对象，然后通过 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">person.name</code>
													来访问 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">person</code>
													对象的私有属性，这时 TypeScript 编译器会提示以下异常：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; background: #f8f8f8; font-size: 12px; word-break: normal; overflow-x: auto; color: #333333; padding: 15px 12px;">Property 'name' is private and only accessible within class 'Person'.(2341)
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">那如何解决这个异常呢？当然你可以使用类型断言把
													person 转为 any 类型：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span style="color: #0086b3;">console</span>.log((person <span style="color: #333333; font-weight: bold;">as</span> any).name);
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">通过这种方式虽然解决了 TypeScript
													编译器的异常提示，但是在运行时我们还是可以访问到 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">Person</code>
													类内部的私有属性，为什么会这样呢？我们来看一下编译生成的 ES5 代码，也许你就知道答案了：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span style="color: #333333; font-weight: bold;">var</span> Person = <span style="color: #999988; font-style: italic;">/** <span style="color: #dd1144;">@class </span>*/</span> (<span><span style="color: #333333; font-weight: bold;">function</span> () </span>{
    <span><span style="color: #333333; font-weight: bold;">function</span> <span style="color: #990000; font-weight: bold;">Person</span>(<span>name</span>) </span>{
      <span style="color: #0086b3;">this</span>.name = name;
    }
    <span style="color: #333333; font-weight: bold;">return</span> Person;
}());

<span style="color: #333333; font-weight: bold;">var</span> person = <span style="color: #333333; font-weight: bold;">new</span> Person(<span style="color: #dd1144;">&quot;Semlinker&quot;</span>);
<span style="color: #0086b3;">console</span>.log(person.name);
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">这时相信有些小伙伴会好奇，在
													TypeScript 3.8 以上版本通过 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">#</code>
													号定义的私有字段编译后会生成什么代码：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">Person</span> </span>{
  #name: string;

  <span><span style="color: #990000; font-weight: bold;">constructor</span>(<span>name: string</span>)</span> {
    <span style="color: #0086b3;">this</span>.#name = name;
  }

  <span><span style="color: #990000; font-weight: bold;">greet</span>()</span> {
    <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">`Hello, my name is <span style="color: #333333; font-weight: 400;">${<span style="color: #0086b3;">this</span>.#name}</span>!`</span>);
  }
}
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">以上代码目标设置为
													ES2015，会编译生成以下代码：</p>
												<pre
													style="font-size: 1em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; overflow: auto; line-height: 1.75; position: relative; color: #333333; background: #f8f8f8;"
													xml:space="preserve"><code lang="javascript" style="border-radius: 2px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin: 0px; display: block; font-size: 12px; word-break: normal; overflow-x: auto; padding: 15px 12px; color: #333333; background: #f8f8f8;"><span style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 12px; color: #333333; position: absolute; right: 70px; top: 2px;">javascript</span><span style="color: #999999; font-weight: bold;">&quot;use strict&quot;</span>;
<span style="color: #333333; font-weight: bold;">var</span> __classPrivateFieldSet = (<span style="color: #0086b3;">this</span> &amp;&amp; <span style="color: #0086b3;">this</span>.__classPrivateFieldSet) 
  || <span><span style="color: #333333; font-weight: bold;">function</span> (<span>receiver, privateMap, value</span>) </span>{
    <span style="color: #333333; font-weight: bold;">if</span> (!privateMap.has(receiver)) {
      <span style="color: #333333; font-weight: bold;">throw</span> <span style="color: #333333; font-weight: bold;">new</span> <span style="color: #0086b3;">TypeError</span>(<span style="color: #dd1144;">&quot;attempted to set private field on non-instance&quot;</span>);
    }
    privateMap.set(receiver, value);
    <span style="color: #333333; font-weight: bold;">return</span> value;
};

<span style="color: #333333; font-weight: bold;">var</span> __classPrivateFieldGet = (<span style="color: #0086b3;">this</span> &amp;&amp; <span style="color: #0086b3;">this</span>.__classPrivateFieldGet) 
  || <span><span style="color: #333333; font-weight: bold;">function</span> (<span>receiver, privateMap</span>) </span>{
    <span style="color: #333333; font-weight: bold;">if</span> (!privateMap.has(receiver)) {
      <span style="color: #333333; font-weight: bold;">throw</span> <span style="color: #333333; font-weight: bold;">new</span> <span style="color: #0086b3;">TypeError</span>(<span style="color: #dd1144;">&quot;attempted to get private field on non-instance&quot;</span>);
    }
    <span style="color: #333333; font-weight: bold;">return</span> privateMap.get(receiver);
};

<span style="color: #333333; font-weight: bold;">var</span> _name;
<span><span style="color: #333333; font-weight: bold;">class</span> <span style="color: #445588; font-weight: bold;">Person</span> </span>{
    <span><span style="color: #990000; font-weight: bold;">constructor</span>(<span>name</span>)</span> {
      _name.set(<span style="color: #0086b3;">this</span>, <span style="color: #333333; font-weight: bold;">void</span> <span style="color: teal;">0</span>);
      __classPrivateFieldSet(<span style="color: #0086b3;">this</span>, _name, name);
    }
    <span><span style="color: #990000; font-weight: bold;">greet</span>()</span> {
      <span style="color: #0086b3;">console</span>.log(<span style="color: #dd1144;">`Hello, my name is <span style="color: #333333; font-weight: 400;">${__classPrivateFieldGet(<span style="color: #0086b3;">this</span>, _name)}</span>!`</span>);
    }
}
_name = <span style="color: #333333; font-weight: bold;">new</span> <span style="color: #0086b3;">WeakMap</span>();
<span style="position: absolute; top: 6px; right: 15px; font-size: 12px; line-height: 1; cursor: pointer; color: rgba(140, 140, 140, 0.8); transition: color 0.1s ease 0s;">复制代码</span></code></pre>
												<p style="line-height: inherit; margin-top: 22px; margin-bottom: 22px;">通过观察上述代码，使用 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">#</code>
													号定义的 ECMAScript 私有字段，会通过 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">WeakMap</code>
													对象来存储，同时编译器会生成 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">__classPrivateFieldSet</code>
													和 <code
														style="word-break: break-word; border-radius: 2px; overflow-x: auto; background-color: #fff5f5; color: #ff502c; padding: 0.065em 0.4em; font-size: 0.87em; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">__classPrivateFieldGet</code>
													这两个方法用于设置值和获取值。</p>
												<h3
													style="line-height: 1.5; margin-top: 35px; margin-bottom: 10px; padding-bottom: 0px; font-size: 18px;">
													<br clear="none" /></h3>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</span>
	</div>
</body>

</html> 